const { getModuleByDisplayName, React } = require('powercord/webpack');

const Flex = getModuleByDisplayName('Flex');
const DFormItem = getModuleByDisplayName('FormItem');
const FormDivider = getModuleByDisplayName('FormDivider');
const FormText = getModuleByDisplayName('FormText');

const flexClassName = `${Flex.Direction.VERTICAL} ${Flex.Justify.START} ${Flex.Align.STRETCH} ${Flex.Wrap.NO_WRAP}`;

module.exports = class FormItem extends React.Component {
  constructor () {
    super();

    const modules = powercord.pluginManager
      .get('pc-classNameNormalizer')
      ._fetchAllModules();

    this.classModule = modules.find(m => Object.keys(m).includes('marginBottom20'));
    this.formModule = modules.find(m => Object.keys(m).includes('formText'));
  }

  render () {
    return (
      <DFormItem
        title={this.props.title}
        required={this.props.required}
        className={`${flexClassName} ${this.classModule.marginBottom20}`}
      >
        {this.props.children}

        <FormText className={this.formModule.description}>
          {this.props.note}
        </FormText>

        <FormDivider className={this.classModule.marginTop20} />
      </DFormItem>
    );
  }
};
