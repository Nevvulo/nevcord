const asyncArray = {
  forEach: async (array, func) => {
    const out = [];
    const promises = [];
    array.forEach(item => {
      promises.push(new Promise(async res => {
        await func(item);
        res();
      }));
    });
    await Promise.all(promises);
    return out;
  },

  map: async (array, map) => {
    const out = [];
    await asyncArray.forEach(array, async item => {
      out.push(await map(item));
    });
    return out;
  },

  filter: async (array, filter) => {
    const out = [];
    await asyncArray.forEach(array, async item => {
      if (await filter(item)) {
        out.push(item);
      }
    });
    return out;
  }
};

module.exports = asyncArray;
